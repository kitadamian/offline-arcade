<!DOCTYPE html>
<html lang="pl" manifest="cache.manifest">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="Gry przeglƒÖdarkowe offline - graj bez internetu w podr√≥≈ºy">
    <title>Offline Arcade - Gry bez Internetu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        :root {
            --neon-cyan: #00f5ff;
            --neon-magenta: #ff00ff;
            --neon-yellow: #ffff00;
            --neon-green: #00ff88;
            --dark-bg: #0a0a0f;
            --panel-bg: #1a1a2e;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Animated background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                linear-gradient(45deg, rgba(0,245,255,0.03) 0%, transparent 50%),
                linear-gradient(-45deg, rgba(255,0,255,0.03) 0%, transparent 50%);
            background-size: 100px 100px;
        }

        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background-image: 
                linear-gradient(rgba(0,245,255,0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,245,255,0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-50px, -50px); }
        }

        header {
            padding: 2rem 1rem;
            text-align: center;
            background: linear-gradient(180deg, var(--panel-bg) 0%, transparent 100%);
            border-bottom: 2px solid var(--neon-cyan);
            box-shadow: 0 0 30px rgba(0,245,255,0.2);
        }

        h1 {
            font-size: clamp(1.5rem, 5vw, 3rem);
            text-transform: uppercase;
            letter-spacing: 3px;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-magenta));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0,245,255,0.5);
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Audio Controls */
        .audio-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
            background: rgba(26,26,46,0.9);
            padding: 10px;
            border-radius: 30px;
            border: 1px solid var(--neon-cyan);
            backdrop-filter: blur(10px);
        }

        .audio-btn {
            background: transparent;
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 1.2rem;
        }

        .audio-btn:hover, .audio-btn.active {
            background: var(--neon-cyan);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        /* Games Grid */
        .games-container {
            flex: 1;
            padding: 2rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .game-card {
            background: var(--panel-bg);
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-magenta), var(--neon-yellow));
            z-index: -1;
            border-radius: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .game-card:hover::before {
            opacity: 1;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0,245,255,0.3);
        }

        .game-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .game-title {
            color: var(--neon-cyan);
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .game-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .high-score {
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--neon-yellow);
        }

        /* Game Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .game-window {
            background: var(--panel-bg);
            border: 2px solid var(--neon-cyan);
            border-radius: 20px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(0,245,255,0.3);
        }

        .game-header {
            background: linear-gradient(90deg, rgba(0,245,255,0.1), rgba(255,0,255,0.1));
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--neon-cyan);
        }

        .game-header h2 {
            color: var(--neon-cyan);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 1.2rem;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: var(--neon-magenta);
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }

        .close-btn:hover {
            transform: rotate(90deg);
            color: var(--neon-yellow);
        }

        .game-content {
            flex: 1;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        canvas {
            border: 2px solid var(--neon-cyan);
            border-radius: 10px;
            max-width: 100%;
            box-shadow: 0 0 20px rgba(0,245,255,0.2);
        }

        .game-controls {
            margin-top: 1rem;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            background: transparent;
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 0.8rem;
        }

        .btn:hover {
            background: var(--neon-cyan);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        .mobile-controls {
            display: none;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 1rem;
            width: 100%;
            max-width: 200px;
        }

        @media (max-width: 768px) {
            .mobile-controls {
                display: grid;
            }
        }

        .control-btn {
            background: rgba(0,245,255,0.1);
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            border-radius: 10px;
            width: 100%;
            aspect-ratio: 1;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
        }

        .control-btn:active {
            background: var(--neon-cyan);
            color: var(--dark-bg);
        }

        .control-btn:nth-child(2) { grid-column: 2; }
        .control-btn:nth-child(3) { grid-column: 1; grid-row: 2; }
        .control-btn:nth-child(4) { grid-column: 2; grid-row: 2; }
        .control-btn:nth-child(5) { grid-column: 3; grid-row: 2; }

        /* Statistics */
        .stats {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: rgba(26,26,46,0.9);
            padding: 1rem;
            border-radius: 15px;
            border: 1px solid var(--neon-green);
            font-size: 0.8rem;
            max-width: 200px;
            backdrop-filter: blur(10px);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            color: var(--neon-green);
        }

        /* Footer */
        footer {
            background: var(--panel-bg);
            border-top: 2px solid var(--neon-magenta);
            padding: 2rem 1rem;
            text-align: center;
            margin-top: auto;
        }

        .author-info {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .author-name {
            color: var(--neon-magenta);
            font-weight: bold;
            font-size: 1.2rem;
            text-decoration: none;
            display: inline-block;
            margin: 0.5rem 0;
            transition: all 0.3s;
        }

        .author-name:hover {
            text-shadow: 0 0 20px var(--neon-magenta);
            transform: scale(1.1);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 1rem;
        }

        .social-link {
            color: var(--neon-cyan);
            text-decoration: none;
            border: 1px solid var(--neon-cyan);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .social-link:hover {
            background: var(--neon-cyan);
            color: var(--dark-bg);
        }

        .offline-badge {
            display: inline-block;
            background: var(--neon-green);
            color: var(--dark-bg);
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-top: 0.5rem;
            text-transform: uppercase;
        }

        /* Touch feedback animation */
        @keyframes ripple {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(4); opacity: 0; }
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(0,245,255,0.3);
            width: 20px;
            height: 20px;
            animation: ripple 0.6s ease-out;
            pointer-events: none;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .audio-controls {
                top: 10px;
                right: 10px;
                padding: 5px;
            }
            
            .audio-btn {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            .games-container {
                padding: 1rem 0.5rem;
            }
            
            .game-card {
                padding: 1.5rem;
            }
        }
    </style>
<base target="_blank">
</head>
<body>
    <div class="bg-animation"></div>
    <div class="grid-overlay"></div>

    <!-- Audio Controls -->
    <div class="audio-controls">
        <button class="audio-btn" id="musicToggle" title="Muzyka w tle">üéµ</button>
        <button class="audio-btn" id="sfxToggle" title="Efekty d≈∫wiƒôkowe">üîä</button>
    </div>

    <header>
        <h1>Offline Arcade</h1>
        <p class="subtitle">Gry bez internetu - Graj w podr√≥≈ºy</p>
        <span class="offline-badge">Dzia≈Ça Offline</span>
    </header>

    <!-- Stats Panel -->
    <div class="stats" id="statsPanel">
        <div class="stat-item">
            <span>Gier rozegranych:</span>
            <span id="gamesPlayed">0</span>
        </div>
        <div class="stat-item">
            <span>Czas gry:</span>
            <span id="playTime">0m</span>
        </div>
    </div>

    <main class="games-container">
        <div class="games-grid">
            <!-- Snake -->
            <div class="game-card" onclick="openGame('snake')">
                <span class="game-icon">üêç</span>
                <h3 class="game-title">Neon Snake</h3>
                <p class="game-desc">Klasyczny wƒÖ≈º w neonowej ods≈Çonie. Zjadaj, rosnij, przetrwaj!</p>
                <div class="high-score">Rekord: <span id="snakeHighScore">0</span></div>
            </div>

            <!-- 2048 -->
            <div class="game-card" onclick="openGame('game2048')">
                <span class="game-icon">üî¢</span>
                <h3 class="game-title">Cyber 2048</h3>
                <p class="game-desc">Po≈ÇƒÖcz cyfry i dojd≈∫ do 2048. Wymaga strategii!</p>
                <div class="high-score">Rekord: <span id="2048HighScore">0</span></div>
            </div>

            <!-- Tic Tac Toe -->
            <div class="game-card" onclick="openGame('tictactoe')">
                <span class="game-icon">‚≠ï</span>
                <h3 class="game-title">Matrix Tic-Tac-Toe</h3>
                <p class="game-desc">K√≥≈Çko i krzy≈ºyk z niepokonanym AI. Czy dasz radƒô wygraƒá?</p>
                <div class="high-score">Remisy: <span id="tttHighScore">0</span></div>
            </div>

            <!-- Memory -->
            <div class="game-card" onclick="openGame('memory')">
                <span class="game-icon">üß†</span>
                <h3 class="game-title">Memory Hack</h3>
                <p class="game-desc">Znajd≈∫ pary kart w jak najmniejszej liczbie ruch√≥w.</p>
                <div class="high-score">Najlepszy wynik: <span id="memoryHighScore">--</span></div>
            </div>

            <!-- Pong -->
            <div class="game-card" onclick="openGame('pong')">
                <span class="game-icon">üèì</span>
                <h3 class="game-title">Neon Pong</h3>
                <p class="game-desc">Klasyczny tenis sto≈Çowy. Pierwszy do 5 punkt√≥w!</p>
                <div class="high-score">Wygrane: <span id="pongHighScore">0</span></div>
            </div>

            <!-- Dino Run -->
            <div class="game-card" onclick="openGame('dino')">
                <span class="game-icon">ü¶ñ</span>
                <h3 class="game-title">Cyber Dino</h3>
                <p class="game-desc">Skacz przez przeszkody w stylu Chrome Dino.</p>
                <div class="high-score">Rekord: <span id="dinoHighScore">0</span></div>
            </div>
        </div>
    </main>

    <!-- Game Modal -->
    <div id="gameModal" class="modal">
        <div class="game-window">
            <div class="game-header">
                <h2 id="modalTitle">Gra</h2>
                <button class="close-btn" onclick="closeGame()">√ó</button>
            </div>
            <div class="game-content" id="gameContent">
                <!-- Dynamic game content -->
            </div>
            <div class="mobile-controls" id="mobileControls">
                <button class="control-btn" data-dir="up">‚ñ≤</button>
                <button class="control-btn" data-dir="left">‚óÑ</button>
                <button class="control-btn" data-dir="down">‚ñº</button>
                <button class="control-btn" data-dir="right">‚ñ∫</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="author-info">
            <p>Stworzone przez</p>
            <a href="https://linktr.ee/kitadamian" target="_blank" class="author-name">Damian Kita</a>
            <p>Full Stack Developer & Game Designer</p>
        </div>
        <div class="social-links">
            <a href="https://linktr.ee/kitadamian" target="_blank" class="social-link">Linktree</a>
            <a href="#" class="social-link" onclick="alert('Wersja offline - brak po≈ÇƒÖczenia z internetem!')">Portfolio</a>
        </div>
        <p style="margin-top: 1rem; font-size: 0.8rem; color: var(--text-secondary);">
            ¬© 2024 Offline Arcade. Wszystkie gry dzia≈ÇajƒÖ bez internetu.
        </p>
    </footer>

    <script>
        // Audio System (Web Audio API)
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();
        
        let musicEnabled = false;
        let sfxEnabled = true;
        let musicOscillator = null;
        let musicGain = null;
        let gameIntervals = [];
        let currentGame = null;
        let gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || '0');
        let totalPlayTime = parseInt(localStorage.getItem('playTime') || '0');
        
        // Stats update
        document.getElementById('gamesPlayed').textContent = gamesPlayed;
        document.getElementById('playTime').textContent = Math.floor(totalPlayTime / 60) + 'h ' + (totalPlayTime % 60) + 'm';

        // Sound Effects
        function playSound(frequency, duration, type = 'square') {
            if (!sfxEnabled) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.value = frequency;
            osc.type = type;
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + duration);
        }

        function playMoveSound() { playSound(400, 0.1, 'sine'); }
        function playEatSound() { 
            playSound(600, 0.1, 'square'); 
            setTimeout(() => playSound(800, 0.1, 'square'), 50);
        }
        function playGameOverSound() {
            playSound(300, 0.3, 'sawtooth');
            setTimeout(() => playSound(200, 0.5, 'sawtooth'), 300);
        }
        function playWinSound() {
            playSound(523.25, 0.1, 'sine');
            setTimeout(() => playSound(659.25, 0.1, 'sine'), 100);
            setTimeout(() => playSound(783.99, 0.2, 'sine'), 200);
        }

        // Background Music (Simple Arpeggio)
        function startMusic() {
            if (!musicEnabled) return;
            const notes = [261.63, 329.63, 392.00, 523.25, 392.00, 329.63]; // C Major
            let noteIndex = 0;
            
            function playNote() {
                if (!musicEnabled) return;
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.frequency.value = notes[noteIndex % notes.length];
                osc.type = 'triangle';
                gain.gain.value = 0.05;
                osc.start();
                
                setTimeout(() => {
                    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1);
                    osc.stop(audioCtx.currentTime + 0.5);
                }, 200);
                
                noteIndex++;
                musicOscillator = setTimeout(playNote, 300);
            }
            playNote();
        }

        function stopMusic() {
            if (musicOscillator) {
                clearTimeout(musicOscillator);
                musicOscillator = null;
            }
        }

        document.getElementById('musicToggle').addEventListener('click', function() {
            musicEnabled = !musicEnabled;
            this.classList.toggle('active');
            if (musicEnabled) {
                if (audioCtx.state === 'suspended') audioCtx.resume();
                startMusic();
            } else {
                stopMusic();
            }
        });

        document.getElementById('sfxToggle').addEventListener('click', function() {
            sfxEnabled = !sfxEnabled;
            this.classList.toggle('active');
            if (sfxEnabled) playSound(800, 0.1);
        });

        // Touch ripple effect
        document.querySelectorAll('.game-card').forEach(card => {
            card.addEventListener('touchstart', function(e) {
                const touch = e.touches[0];
                const rect = this.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                
                const ripple = document.createElement('span');
                ripple.classList.add('ripple');
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                this.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            });
        });

        // Game Management
        function openGame(gameName) {
            currentGame = gameName;
            gamesPlayed++;
            localStorage.setItem('gamesPlayed', gamesPlayed);
            document.getElementById('gamesPlayed').textContent = gamesPlayed;
            
            document.getElementById('gameModal').classList.add('active');
            const content = document.getElementById('gameContent');
            content.innerHTML = '';
            
            // Clear previous intervals
            gameIntervals.forEach(clearInterval);
            gameIntervals = [];
            
            switch(gameName) {
                case 'snake':
                    document.getElementById('modalTitle').textContent = 'Neon Snake';
                    initSnake(content);
                    break;
                case 'game2048':
                    document.getElementById('modalTitle').textContent = 'Cyber 2048';
                    init2048(content);
                    break;
                case 'tictactoe':
                    document.getElementById('modalTitle').textContent = 'Matrix Tic-Tac-Toe';
                    initTicTacToe(content);
                    break;
                case 'memory':
                    document.getElementById('modalTitle').textContent = 'Memory Hack';
                    initMemory(content);
                    break;
                case 'pong':
                    document.getElementById('modalTitle').textContent = 'Neon Pong';
                    initPong(content);
                    break;
                case 'dino':
                    document.getElementById('modalTitle').textContent = 'Cyber Dino';
                    initDino(content);
                    break;
            }
            if (sfxEnabled) playMoveSound();
        }

        function closeGame() {
            gameIntervals.forEach(clearInterval);
            gameIntervals = [];
            document.getElementById('gameModal').classList.remove('active');
            currentGame = null;
        }

        // SNAKE GAME
        function initSnake(container) {
            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 400;
            container.appendChild(canvas);
            
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Nowa Gra';
            btn.style.marginTop = '10px';
            container.appendChild(btn);
            
            const scoreEl = document.createElement('div');
            scoreEl.style.color = 'var(--neon-green)';
            scoreEl.style.marginTop = '10px';
            container.appendChild(scoreEl);
            
            const ctx = canvas.getContext('2d');
            const gridSize = 20;
            const tileCount = canvas.width / gridSize;
            
            let snake = [{x: 10, y: 10}];
            let food = {x: 15, y: 15};
            let dx = 0;
            let dy = 0;
            let score = 0;
            let gameOver = false;
            
            function draw() {
                if (gameOver) return;
                
                ctx.fillStyle = '#0a0a0f';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw snake
                ctx.shadowBlur = 10;
                ctx.shadowColor = 'var(--neon-green)';
                ctx.fillStyle = '#00ff88';
                snake.forEach((segment, index) => {
                    ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);
                    if (index === 0) {
                        ctx.fillStyle = '#00f5ff';
                    }
                });
                
                // Draw food
                ctx.shadowColor = 'var(--neon-magenta)';
                ctx.fillStyle = '#ff00ff';
                ctx.beginPath();
                ctx.arc(food.x * gridSize + 10, food.y * gridSize + 10, 8, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.shadowBlur = 0;
                
                // Move snake
                const head = {x: snake[0].x + dx, y: snake[0].y + dy};
                
                if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                    gameOver = true;
                    playGameOverSound();
                    scoreEl.textContent = 'Game Over! Wynik: ' + score;
                    return;
                }
                
                if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                    gameOver = true;
                    playGameOverSound();
                    scoreEl.textContent = 'Game Over! Wynik: ' + score;
                    return;
                }
                
                snake.unshift(head);
                
                if (head.x === food.x && head.y === food.y) {
                    score += 10;
                    scoreEl.textContent = 'Wynik: ' + score;
                    playEatSound();
                    food = {
                        x: Math.floor(Math.random() * tileCount),
                        y: Math.floor(Math.random() * tileCount)
                    };
                    // Save high score
                    const high = parseInt(localStorage.getItem('snakeHigh') || '0');
                    if (score > high) {
                        localStorage.setItem('snakeHigh', score);
                        document.getElementById('snakeHighScore').textContent = score;
                    }
                } else {
                    snake.pop();
                }
            }
            
            const gameLoop = setInterval(draw, 100);
            gameIntervals.push(gameLoop);
            
            // Controls
            function setDirection(x, y) {
                if ((x !== 0 && dx === 0) || (y !== 0 && dy === 0)) {
                    dx = x;
                    dy = y;
                }
            }
            
            document.addEventListener('keydown', function handler(e) {
                if (currentGame !== 'snake') {
                    document.removeEventListener('keydown', handler);
                    return;
                }
                switch(e.key) {
                    case 'ArrowUp': setDirection(0, -1); break;
                    case 'ArrowDown': setDirection(0, 1); break;
                    case 'ArrowLeft': setDirection(-1, 0); break;
                    case 'ArrowRight': setDirection(1, 0); break;
                }
            });
            
            // Mobile controls
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.onclick = () => {
                    const dir = btn.dataset.dir;
                    if (dir === 'up') setDirection(0, -1);
                    if (dir === 'down') setDirection(0, 1);
                    if (dir === 'left') setDirection(-1, 0);
                    if (dir === 'right') setDirection(1, 0);
                };
            });
            
            btn.onclick = () => {
                snake = [{x: 10, y: 10}];
                dx = 0;
                dy = 0;
                score = 0;
                gameOver = false;
                scoreEl.textContent = '';
                food = {x: 15, y: 15};
            };
        }

        // 2048 GAME
        function init2048(container) {
            const grid = document.createElement('div');
            grid.style.display = 'grid';
            grid.style.gridTemplateColumns = 'repeat(4, 1fr)';
            grid.style.gap = '10px';
            grid.style.background = 'var(--neon-cyan)';
            grid.style.padding = '10px';
            grid.style.borderRadius = '10px';
            grid.style.width = '100%';
            grid.style.maxWidth = '350px';
            grid.style.aspectRatio = '1';
            grid.style.margin = '0 auto';
            container.appendChild(grid);
            
            const scoreEl = document.createElement('div');
            scoreEl.style.color = 'var(--neon-yellow)';
            scoreEl.style.marginTop = '10px';
            scoreEl.textContent = 'Wynik: 0';
            container.appendChild(scoreEl);
            
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Nowa Gra';
            container.appendChild(btn);
            
            let board = Array(4).fill().map(() => Array(4).fill(0));
            let score = 0;
            
            function updateDisplay() {
                grid.innerHTML = '';
                board.forEach((row, i) => {
                    row.forEach((cell, j) => {
                        const tile = document.createElement('div');
                        tile.style.width = '100%';
                        tile.style.aspectRatio = '1';
                        tile.style.display = 'flex';
                        tile.style.alignItems = 'center';
                        tile.style.justifyContent = 'center';
                        tile.style.background = cell === 0 ? 'rgba(26,26,46,0.9)' : getTileColor(cell);
                        tile.style.color = cell > 4 ? '#fff' : '#000';
                        tile.style.fontWeight = 'bold';
                        tile.style.fontSize = cell > 512 ? '1.2rem' : '1.5rem';
                        tile.style.borderRadius = '5px';
                        tile.style.transition = 'all 0.15s';
                        tile.textContent = cell === 0 ? '' : cell;
                        grid.appendChild(tile);
                    });
                });
                scoreEl.textContent = 'Wynik: ' + score;
            }
            
            function getTileColor(value) {
                const colors = {
                    2: '#eee4da',
                    4: '#ede0c8',
                    8: '#f2b179',
                    16: '#f59563',
                    32: '#f67c5f',
                    64: '#f65e3b',
                    128: '#edcf72',
                    256: '#edcc61',
                    512: '#edc850',
                    1024: '#edc53f',
                    2048: '#edc22e'
                };
                return colors[value] || '#00ff88';
            }
            
            function addRandomTile() {
                const empty = [];
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        if (board[i][j] === 0) empty.push([i, j]);
                    }
                }
                if (empty.length > 0) {
                    const [i, j] = empty[Math.floor(Math.random() * empty.length)];
                    board[i][j] = Math.random() < 0.9 ? 2 : 4;
                }
            }
            
            function move(direction) {
                let moved = false;
                const newBoard = board.map(row => [...row]);
                
                if (direction === 'left') {
                    for (let i = 0; i < 4; i++) {
                        const row = newBoard[i].filter(x => x !== 0);
                        for (let j = 0; j < row.length - 1; j++) {
                            if (row[j] === row[j + 1]) {
                                row[j] *= 2;
                                score += row[j];
                                row.splice(j + 1, 1);
                            }
                        }
                        while (row.length < 4) row.push(0);
                        if (row.join(',') !== newBoard[i].join(',')) moved = true;
                        newBoard[i] = row;
                    }
                } else if (direction === 'right') {
                    for (let i = 0; i < 4; i++) {
                        const row = newBoard[i].filter(x => x !== 0);
                        for (let j = row.length - 1; j > 0; j--) {
                            if (row[j] === row[j - 1]) {
                                row[j] *= 2;
                                score += row[j];
                                row.splice(j - 1, 1);
                            }
                        }
                        while (row.length < 4) row.unshift(0);
                        if (row.join(',') !== newBoard[i].join(',')) moved = true;
                        newBoard[i] = row;
                    }
                } else if (direction === 'up') {
                    for (let j = 0; j < 4; j++) {
                        const col = [newBoard[0][j], newBoard[1][j], newBoard[2][j], newBoard[3][j]].filter(x => x !== 0);
                        for (let i = 0; i < col.length - 1; i++) {
                            if (col[i] === col[i + 1]) {
                                col[i] *= 2;
                                score += col[i];
                                col.splice(i + 1, 1);
                            }
                        }
                        while (col.length < 4) col.push(0);
                        for (let i = 0; i < 4; i++) {
                            if (newBoard[i][j] !== col[i]) moved = true;
                            newBoard[i][j] = col[i];
                        }
                    }
                } else if (direction === 'down') {
                    for (let j = 0; j < 4; j++) {
                        const col = [newBoard[0][j], newBoard[1][j], newBoard[2][j], newBoard[3][j]].filter(x => x !== 0);
                        for (let i = col.length - 1; i > 0; i--) {
                            if (col[i] === col[i - 1]) {
                                col[i] *= 2;
                                score += col[i];
                                col.splice(i - 1, 1);
                            }
                        }
                        while (col.length < 4) col.unshift(0);
                        for (let i = 0; i < 4; i++) {
                            if (newBoard[i][j] !== col[i]) moved = true;
                            newBoard[i][j] = col[i];
                        }
                    }
                }
                
                if (moved) {
                    board = newBoard;
                    addRandomTile();
                    updateDisplay();
                    playMoveSound();
                    
                    if (board.some(row => row.includes(2048))) {
                        playWinSound();
                        alert('Gratulacje! OsiƒÖgnƒÖ≈Çe≈õ 2048!');
                    }
                    
                    const high = parseInt(localStorage.getItem('2048High') || '0');
                    if (score > high) {
                        localStorage.setItem('2048High', score);
                        document.getElementById('2048HighScore').textContent = score;
                    }
                }
            }
            
            // Keyboard controls
            document.addEventListener('keydown', function handler(e) {
                if (currentGame !== 'game2048') {
                    document.removeEventListener('keydown', handler);
                    return;
                }
                switch(e.key) {
                    case 'ArrowUp': move('up'); break;
                    case 'ArrowDown': move('down'); break;
                    case 'ArrowLeft': move('left'); break;
                    case 'ArrowRight': move('right'); break;
                }
            });
            
            // Mobile controls
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.onclick = () => {
                    const dir = btn.dataset.dir;
                    if (dir === 'up') move('up');
                    if (dir === 'down') move('down');
                    if (dir === 'left') move('left');
                    if (dir === 'right') move('right');
                };
            });
            
            btn.onclick = () => {
                board = Array(4).fill().map(() => Array(4).fill(0));
                score = 0;
                addRandomTile();
                addRandomTile();
                updateDisplay();
            };
            
            // Init
            addRandomTile();
            addRandomTile();
            updateDisplay();
        }

        // TIC TAC TOE
        function initTicTacToe(container) {
            const grid = document.createElement('div');
            grid.style.display = 'grid';
            grid.style.gridTemplateColumns = 'repeat(3, 1fr)';
            grid.style.gap = '10px';
            grid.style.width = '100%';
            grid.style.maxWidth = '300px';
            grid.style.aspectRatio = '1';
            container.appendChild(grid);
            
            const status = document.createElement('div');
            status.style.color = 'var(--neon-cyan)';
            status.style.marginTop = '10px';
            status.textContent = 'Twoja kolej (X)';
            container.appendChild(status);
            
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Nowa Gra';
            container.appendChild(btn);
            
            let board = Array(9).fill('');
            let currentPlayer = 'X';
            let gameOver = false;
            let draws = parseInt(localStorage.getItem('tttDraws') || '0');
            
            function render() {
                grid.innerHTML = '';
                board.forEach((cell, i) => {
                    const btn = document.createElement('button');
                    btn.style.aspectRatio = '1';
                    btn.style.background = 'rgba(0,245,255,0.1)';
                    btn.style.border = '2px solid var(--neon-cyan)';
                    btn.style.borderRadius = '10px';
                    btn.style.color = cell === 'X' ? 'var(--neon-cyan)' : 'var(--neon-magenta)';
                    btn.style.fontSize = '2rem';
                    btn.style.fontWeight = 'bold';
                    btn.style.cursor = 'pointer';
                    btn.textContent = cell;
                    btn.onclick = () => makeMove(i);
                    grid.appendChild(btn);
                });
            }
            
            function checkWinner() {
                const lines = [[0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6]];
                for (let [a, b, c] of lines) {
                    if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                        return board[a];
                    }
                }
                return board.every(cell => cell) ? 'draw' : null;
            }
            
            function aiMove() {
                const empty = board.map((v, i) => v === '' ? i : null).filter(v => v !== null);
                if (empty.length === 0) return;
                
                // Simple AI: win or block
                for (let i of empty) {
                    board[i] = 'O';
                    if (checkWinner() === 'O') {
                        render();
                        return;
                    }
                    board[i] = '';
                }
                for (let i of empty) {
                    board[i] = 'X';
                    if (checkWinner() === 'X') {
                        board[i] = 'O';
                        render();
                        return;
                    }
                    board[i] = '';
                }
                
                // Take center or corner or random
                if (empty.includes(4)) {
                    board[4] = 'O';
                } else if (empty.filter(i => [0,2,6,8].includes(i)).length > 0) {
                    const corners = empty.filter(i => [0,2,6,8].includes(i));
                    board[corners[Math.floor(Math.random() * corners.length)]] = 'O';
                } else {
                    board[empty[Math.floor(Math.random() * empty.length)]] = 'O';
                }
                render();
            }
            
            function makeMove(index) {
                if (gameOver || board[index] !== '' || currentPlayer !== 'X') return;
                
                board[index] = 'X';
                playMoveSound();
                render();
                
                const winner = checkWinner();
                if (winner) {
                    gameOver = true;
                    if (winner === 'draw') {
                        status.textContent = 'Remis!';
                        draws++;
                        localStorage.setItem('tttDraws', draws);
                        document.getElementById('tttHighScore').textContent = draws;
                    } else {
                        status.textContent = winner === 'X' ? 'Wygra≈Çe≈õ!' : 'Przegra≈Çe≈õ!';
                        if (winner === 'X') playWinSound();
                        else playGameOverSound();
                    }
                    return;
                }
                
                currentPlayer = 'O';
                status.textContent = 'Ruch AI (O)';
                
                setTimeout(() => {
                    aiMove();
                    const winner2 = checkWinner();
                    if (winner2) {
                        gameOver = true;
                        if (winner2 === 'draw') {
                            status.textContent = 'Remis!';
                            draws++;
                            localStorage.setItem('tttDraws', draws);
                            document.getElementById('tttHighScore').textContent = draws;
                        } else {
                            status.textContent = winner2 === 'X' ? 'Wygra≈Çe≈õ!' : 'Przegra≈Çe≈õ!';
                            if (winner2 === 'X') playWinSound();
                            else playGameOverSound();
                        }
                    } else {
                        currentPlayer = 'X';
                        status.textContent = 'Twoja kolej (X)';
                    }
                }, 500);
            }
            
            btn.onclick = () => {
                board = Array(9).fill('');
                currentPlayer = 'X';
                gameOver = false;
                status.textContent = 'Twoja kolej (X)';
                render();
            };
            
            render();
        }

        // MEMORY GAME
        function initMemory(container) {
            const grid = document.createElement('div');
            grid.style.display = 'grid';
            grid.style.gridTemplateColumns = 'repeat(4, 1fr)';
            grid.style.gap = '10px';
            grid.style.width = '100%';
            grid.style.maxWidth = '350px';
            container.appendChild(grid);
            
            const info = document.createElement('div');
            info.style.color = 'var(--neon-cyan)';
            info.style.marginTop = '10px';
            container.appendChild(info);
            
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Nowa Gra';
            container.appendChild(btn);
            
            const emojis = ['üéÆ', 'üíª', 'üéØ', 'üé®', 'üöÄ', '‚ö°', 'üî•', 'üíé'];
            let cards = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
            let flipped = [];
            let matched = [];
            let moves = 0;
            let lock = false;
            
            function render() {
                grid.innerHTML = '';
                cards.forEach((emoji, i) => {
                    const card = document.createElement('button');
                    card.style.aspectRatio = '1';
                    card.style.background = matched.includes(i) ? 'var(--neon-green)' : 
                                          flipped.includes(i) ? '#fff' : 'rgba(0,245,255,0.2)';
                    card.style.border = '2px solid var(--neon-cyan)';
                    card.style.borderRadius = '10px';
                    card.style.fontSize = '1.5rem';
                    card.style.cursor = 'pointer';
                    card.style.transition = 'all 0.3s';
                    card.textContent = (flipped.includes(i) || matched.includes(i)) ? emoji : '?';
                    card.onclick = () => flipCard(i);
                    grid.appendChild(card);
                });
                info.textContent = `Ruchy: ${moves}`;
            }
            
            function flipCard(index) {
                if (lock || flipped.includes(index) || matched.includes(index)) return;
                
                flipped.push(index);
                render();
                
                if (flipped.length === 2) {
                    moves++;
                    lock = true;
                    
                    if (cards[flipped[0]] === cards[flipped[1]]) {
                        playWinSound();
                        matched.push(...flipped);
                        flipped = [];
                        lock = false;
                        
                        if (matched.length === cards.length) {
                            info.textContent = `Wygrano w ${moves} ruchach!`;
                            playWinSound();
                            const best = localStorage.getItem('memoryBest');
                            if (!best || moves < parseInt(best)) {
                                localStorage.setItem('memoryBest', moves);
                                document.getElementById('memoryHighScore').textContent = moves + ' ruch√≥w';
                            }
                        }
                    } else {
                        setTimeout(() => {
                            flipped = [];
                            render();
                            lock = false;
                        }, 1000);
                    }
                    render();
                    playMoveSound();
                }
            }
            
            btn.onclick = () => {
                cards = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
                flipped = [];
                matched = [];
                moves = 0;
                lock = false;
                render();
            };
            
            render();
        }

        // PONG GAME
        function initPong(container) {
            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 300;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Nowa Gra';
            btn.style.marginTop = '10px';
            container.appendChild(btn);
            
            const scoreEl = document.createElement('div');
            scoreEl.style.color = 'var(--neon-cyan)';
            scoreEl.style.marginTop = '10px';
            container.appendChild(scoreEl);
            
            let playerY = 120;
            let aiY = 120;
            let ballX = 200;
            let ballY = 150;
            let ballDX = 4;
            let ballDY = 4;
            let playerScore = 0;
            let aiScore = 0;
            let gameLoop;
            let isRunning = false;
            
            function draw() {
                ctx.fillStyle = '#0a0a0f';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Middle line
                ctx.strokeStyle = 'rgba(0,245,255,0.3)';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(200, 0);
                ctx.lineTo(200, 300);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Paddles
                ctx.shadowBlur = 10;
                ctx.shadowColor = 'var(--neon-cyan)';
                ctx.fillStyle = '#00f5ff';
                ctx.fillRect(10, playerY, 10, 60);
                
                ctx.shadowColor = 'var(--neon-magenta)';
                ctx.fillStyle = '#ff00ff';
                ctx.fillRect(380, aiY, 10, 60);
                
                // Ball
                ctx.shadowColor = 'var(--neon-yellow)';
                ctx.fillStyle = '#ffff00';
                ctx.beginPath();
                ctx.arc(ballX, ballY, 8, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.shadowBlur = 0;
                
                scoreEl.textContent = `${playerScore} - ${aiScore}`;
                
                if (!isRunning) return;
                
                ballX += ballDX;
                ballY += ballDY;
                
                // AI movement
                if (ballY > aiY + 30) aiY += 3;
                if (ballY < aiY + 30) aiY -= 3;
                
                // Collision with paddles
                if (ballX < 25 && ballY > playerY && ballY < playerY + 60) {
                    ballDX = -ballDX * 1.05;
                    ballDY += (Math.random() - 0.5) * 2;
                    playMoveSound();
                }
                if (ballX > 375 && ballY > aiY && ballY < aiY + 60) {
                    ballDX = -ballDX * 1.05;
                    playMoveSound();
                }
                
                // Wall collision
                if (ballY < 0 || ballY > 300) ballDY = -ballDY;
                
                // Scoring
                if (ballX < 0) {
                    aiScore++;
                    playGameOverSound();
                    resetBall();
                }
                if (ballX > 400) {
                    playerScore++;
                    playWinSound();
                    resetBall();
                    const wins = parseInt(localStorage.getItem('pongWins') || '0');
                    localStorage.setItem('pongWins', wins + 1);
                    document.getElementById('pongHighScore').textContent = wins + 1;
                }
                
                // Limit paddle movement
                playerY = Math.max(0, Math.min(240, playerY));
                aiY = Math.max(0, Math.min(240, aiY));
            }
            
            function resetBall() {
                ballX = 200;
                ballY = 150;
                ballDX = (Math.random() > 0.5 ? 4 : -4);
                ballDY = (Math.random() - 0.5) * 4;
            }
            
            gameLoop = setInterval(draw, 1000/60);
            gameIntervals.push(gameLoop);
            
            // Mouse/Touch control
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                playerY = e.clientY - rect.top - 30;
            });
            
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const touch = e.touches[0];
                playerY = touch.clientY - rect.top - 30;
            }, {passive: false});
            
            btn.onclick = () => {
                playerScore = 0;
                aiScore = 0;
                isRunning = true;
                resetBall();
            };
            
            isRunning = true;
        }

        // DINO GAME
        function initDino(container) {
            const canvas = document.createElement('canvas');
            canvas.width = 600;
            canvas.height = 200;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = 'Skacz / Start';
            btn.style.marginTop = '10px';
            container.appendChild(btn);
            
            const scoreEl = document.createElement('div');
            scoreEl.style.color = 'var(--neon-green)';
            scoreEl.style.marginTop = '10px';
            container.appendChild(scoreEl);
            
            let dinoY = 140;
            let velocity = 0;
            let gravity = 0.6;
            let isJumping = false;
            let obstacles = [];
            let score = 0;
            let gameSpeed = 5;
            let gameOver = false;
            let gameStarted = false;
            
            function draw() {
                ctx.fillStyle = '#0a0a0f';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Ground
                ctx.strokeStyle = '#00f5ff';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, 170);
                ctx.lineTo(600, 170);
                ctx.stroke();
                
                // Dino
                ctx.shadowBlur = 10;
                ctx.shadowColor = 'var(--neon-green)';
                ctx.fillStyle = '#00ff88';
                ctx.fillRect(50, dinoY, 30, 30);
                
                // Eyes
                ctx.fillStyle = '#000';
                ctx.fillRect(70, dinoY + 5, 5, 5);
                
                // Obstacles
                ctx.shadowColor = 'var(--neon-magenta)';
                ctx.fillStyle = '#ff00ff';
                obstacles.forEach(obs => {
                    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                });
                
                ctx.shadowBlur = 0;
                
                if (!gameStarted || gameOver) return;
                
                // Physics
                if (isJumping) {
                    velocity += gravity;
                    dinoY += velocity;
                    if (dinoY >= 140) {
                        dinoY = 140;
                        isJumping = false;
                        velocity = 0;
                    }
                }
                
                // Move obstacles
                obstacles.forEach(obs => obs.x -= gameSpeed);
                obstacles = obstacles.filter(obs => obs.x > -50);
                
                // Spawn obstacles
                if (Math.random() < 0.02) {
                    const height = Math.random() > 0.5 ? 40 : 30;
                    obstacles.push({
                        x: 600,
                        y: 170 - height,
                        width: 20,
                        height: height
                    });
                }
                
                // Collision
                obstacles.forEach(obs => {
                    if (50 < obs.x + obs.width && 50 + 30 > obs.x &&
                        dinoY < obs.y + obs.height && dinoY + 30 > obs.y) {
                        gameOver = true;
                        playGameOverSound();
                        scoreEl.textContent = 'Game Over! Wynik: ' + Math.floor(score);
                        const high = parseInt(localStorage.getItem('dinoHigh') || '0');
                        if (Math.floor(score) > high) {
                            localStorage.setItem('dinoHigh', Math.floor(score));
                            document.getElementById('dinoHighScore').textContent = Math.floor(score);
                        }
                    }
                });
                
                score += 0.1;
                scoreEl.textContent = 'Wynik: ' + Math.floor(score);
            }
            
            const gameLoop = setInterval(draw, 1000/60);
            gameIntervals.push(gameLoop);
            
            function jump() {
                if (!gameStarted) {
                    gameStarted = true;
                    gameOver = false;
                    score = 0;
                    obstacles = [];
                    dinoY = 140;
                } else if (!isJumping && !gameOver) {
                    velocity = -12;
                    isJumping = true;
                    playMoveSound();
                } else if (gameOver) {
                    gameOver = false;
                    score = 0;
                    obstacles = [];
                    dinoY = 140;
                }
            }
            
            document.addEventListener('keydown', function handler(e) {
                if (currentGame !== 'dino') {
                    document.removeEventListener('keydown', handler);
                    return;
                }
                if (e.code === 'Space') {
                    e.preventDefault();
                    jump();
                }
            });
            
            btn.onclick = jump;
            canvas.onclick = jump;
            
            // Touch control
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                jump();
            }, {passive: false});
        }

        // Service Worker for offline support
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript,' + encodeURIComponent(`
                self.addEventListener('install', e => e.waitUntil(self.skipWaiting()));
                self.addEventListener('activate', e => e.waitUntil(self.clients.claim()));
                self.addEventListener('fetch', e => e.respondWith(fetch(e.request).catch(() => new Response('Offline'))));
            `)).catch(() => console.log('SW registration skipped (offline mode)'));
        }

        // Load high scores
        document.getElementById('snakeHighScore').textContent = localStorage.getItem('snakeHigh') || '0';
        document.getElementById('2048HighScore').textContent = localStorage.getItem('2048High') || '0';
        document.getElementById('tttHighScore').textContent = localStorage.getItem('tttDraws') || '0';
        const memBest = localStorage.getItem('memoryBest');
        document.getElementById('memoryHighScore').textContent = memBest ? memBest + ' ruch√≥w' : '--';
        document.getElementById('pongHighScore').textContent = localStorage.getItem('pongWins') || '0';
        document.getElementById('dinoHighScore').textContent = localStorage.getItem('dinoHigh') || '0';

        // Track play time
        setInterval(() => {
            if (currentGame) {
                totalPlayTime++;
                localStorage.setItem('playTime', totalPlayTime);
                document.getElementById('playTime').textContent = Math.floor(totalPlayTime / 60) + 'h ' + (totalPlayTime % 60) + 'm';
            }
        }, 60000);
    </script>
</body>
</html>